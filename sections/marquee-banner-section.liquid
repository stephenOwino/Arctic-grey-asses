{%- comment -%}
  Marquee Banner Section with Trust Badges and Logos
{%- endcomment -%}

<style>
  /* Marquee Section */
  .marquee {
    position: relative;
    width: 100%;
    background-color: #000000;
    overflow: hidden;
    display: flex;
    white-space: nowrap;
    padding: 12px 0;
  }

  .marquee__content {
    display: flex;
    animation: marquee {{ section.settings.marquee_speed }}s linear infinite;
    align-items: center;
  }

  .marquee__item {
    display: flex;
    align-items: center;
    color: #FFFFFF;
    margin: 0 30px;
    font-family: 'Rubik', sans-serif;
    font-weight: 500;
    font-size: 14px;
    flex-shrink: 0;
  }

  .marquee__item--trust-badge {
    gap: 8px;
  }

  .marquee__item--logo {
    margin: 0 25px;
  }

  .marquee__item svg,
  .marquee__item img {
    flex-shrink: 0;
  }

  .marquee__trust-icon {
    width: 16px;
    height: 16px;
  }

  .marquee__logo {
    height: 24px;
    width: auto;
    filter: brightness(0) invert(1); /* Makes logos white */
  }

  .marquee__stars {
    display: flex;
    align-items: center;
    gap: 4px;
    margin: 0 30px;
  }

  .marquee__star {
    width: 14px;
    height: 14px;
  }

  .marquee__rating-text {
    margin-left: 8px;
    font-size: 13px;
  }

  @keyframes marquee {
    0% {
      transform: translateX(0);
    }
    100% {
      transform: translateX(-50%);
    }
  }

  /* Pause animation on hover if enabled */
  {% if section.settings.pause_on_hover %}
  .marquee:hover .marquee__content {
    animation-play-state: paused;
  }
  {% endif %}
</style>

<!-- Marquee Section -->
{% if section.settings.enable_marquee %}
<section class="marquee">
  <div class="marquee__content">
    {% comment %} Repeat content twice for seamless loop {% endcomment %}
    {% for repeat in (1..2) %}
      
      {% comment %} Trust Badges {% endcomment %}
      {% for block in section.blocks %}
        {% case block.type %}
          {% when 'trust_badge' %}
            <div class="marquee__item marquee__item--trust-badge">
              {% if block.settings.icon != blank %}
                <img src="{{ block.settings.icon | asset_url }}" 
                     alt="{{ block.settings.text }}" 
                     class="marquee__trust-icon">
              {% else %}
                {% comment %} Default star icon if no custom icon {% endcomment %}
                <svg class="marquee__trust-icon" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M8 0L10.472 5.27L16 6.13L12 10.24L12.944 16L8 13.27L3.056 16L4 10.24L0 6.13L5.528 5.27L8 0Z" fill="#FFB800"/>
                </svg>
              {% endif %}
              {{ block.settings.text }}
            </div>
          
          {% when 'brand_logo' %}
            <div class="marquee__item marquee__item--logo">
              {% if block.settings.logo != blank %}
                <img src="{{ block.settings.logo | asset_url }}" 
                     alt="{{ block.settings.brand_name }}" 
                     class="marquee__logo">
              {% endif %}
            </div>
          
          {% when 'star_rating' %}
            <div class="marquee__stars">
              {% for i in (1..5) %}
                <svg class="marquee__star" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M8 0L10.472 5.27L16 6.13L12 10.24L12.944 16L8 13.27L3.056 16L4 10.24L0 6.13L5.528 5.27L8 0Z" fill="#FFB800"/>
                </svg>
              {% endfor %}
              <span class="marquee__rating-text">{{ block.settings.rating_text }}</span>
            </div>
        {% endcase %}
      {% endfor %}
      
    {% endfor %}
  </div>
</section>
{% endif %}

{% schema %}
{
  "name": "Marquee Banner",
  "settings": [
    {
      "type": "header",
      "content": "Marquee Settings"
    },
    {
      "type": "checkbox",
      "id": "enable_marquee",
      "label": "Enable Marquee",
      "default": true
    },
    {
      "type": "range",
      "id": "marquee_speed",
      "min": 10,
      "max": 60,
      "step": 5,
      "unit": "s",
      "label": "Marquee Animation Speed",
      "default": 30
    },
    {
      "type": "checkbox",
      "id": "pause_on_hover",
      "label": "Pause animation on hover",
      "default": false
    }
  ],
  "blocks": [
    {
      "type": "trust_badge",
      "name": "Trust Badge",
      "settings": [
        {
          "type": "text",
          "id": "text",
          "label": "Badge Text",
          "default": "High Quality Ingredients"
        },
        {
          "type": "image_picker",
          "id": "icon",
          "label": "Custom Icon (SVG recommended)"
        }
      ]
    },
    {
      "type": "brand_logo",
      "name": "Brand Logo",
      "settings": [
        {
          "type": "image_picker",
          "id": "logo",
          "label": "Brand Logo"
        },
        {
          "type": "text",
          "id": "brand_name",
          "label": "Brand Name (for alt text)",
          "default": "Brand Logo"
        }
      ]
    },
    {
      "type": "star_rating",
      "name": "Star Rating",
      "settings": [
        {
          "type": "text",
          "id": "rating_text",
          "label": "Rating Text",
          "default": "12,000+ 5-star Reviews"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Marquee Banner",
      "category": "Promotional",
      "blocks": [
        {
          "type": "trust_badge",
          "settings": {
            "text": "High Quality Ingredients"
          }
        },
        {
          "type": "trust_badge",
          "settings": {
            "text": "Independently Certified"
          }
        },
        {
          "type": "trust_badge",
          "settings": {
            "text": "Expert Driven"
          }
        },
        {
          "type": "trust_badge",
          "settings": {
            "text": "Shipped Internationally"
          }
        },
        {
          "type": "star_rating"
        }
      ]
    }
  ]
}
{% endschema %}