<header class="site-header">
  <div class="header-container">
    <div class="header-logo">
      <a href="{{ routes.root_url }}" class="logo-link">
        <span class="brand-text">uncmfrt.com</span>
      </a>
    </div>

    <button class="mobile-menu-toggle" aria-label="Toggle menu">
      <span></span>
      <span></span>
      <span></span>
    </button>

    <nav class="header-nav desktop-nav">
      <div class="search-icon">
        <button class="search-toggle" aria-label="Search">
          <img src="{{ 'icon-search.svg' | asset_url }}" alt="Search" width="20" height="20" loading="lazy">
        </button>
      </div>

      <ul class="nav-links">
        <li><a href="{{ collections.all.url }}" class="nav-link">Shop</a></li>
        <li><a href="/pages/science" class="nav-link">Science</a></li>
        <li><a href="/pages/podcasts" class="nav-link">Podcasts</a></li>
        <li><a href="/pages/trainers" class="nav-link">Trainers</a></li>
        <li><a href="{{ blog.url }}" class="nav-link">Blog</a></li>
      </ul>

      <div class="header-actions">
        <div class="men-section">
          <a href="/collections/men" class="men-link">Men</a>
          <img src="{{ 'icon-user.svg' | asset_url }}" alt="User" width="16" height="16" loading="lazy">
        </div>

        <a href="/pages/quiz" class="quiz-btn">Take The Quiz</a>

        <a href="{{ routes.account_url }}" class="user-icon" aria-label="Account">
          <img src="{{ 'icon-account.svg' | asset_url }}" alt="Account" width="20" height="20" loading="lazy">
        </a>

        <a href="{{ routes.cart_url }}" class="cart-icon" aria-label="Cart">
          <img src="{{ 'icon-cart.svg' | asset_url }}" alt="Cart" width="20" height="20" loading="lazy">
          <span class="cart-count" style="display: none;">0</span>
        </a>
      </div>
    </nav>

    <nav class="header-nav mobile-nav">
      <div class="mobile-nav-content">
        <div class="mobile-search">
          <button class="search-toggle" aria-label="Search">
            <img src="{{ 'icon-search.svg' | asset_url }}" alt="Search" width="20" height="20" loading="lazy">
          </button>
        </div>

        <ul class="mobile-nav-links">
          <li><a href="{{ collections.all.url }}" class="mobile-nav-link">Shop</a></li>
          <li><a href="/pages/science" class="mobile-nav-link">Science</a></li>
          <li><a href="/pages/podcasts" class="mobile-nav-link">Podcasts</a></li>
          <li><a href="/pages/trainers" class="mobile-nav-link">Trainers</a></li>
          <li><a href="{{ blog.url }}" class="mobile-nav-link">Blog</a></li>
          <li><a href="/collections/men" class="mobile-nav-link">Men</a></li>
          <li><a href="/pages/quiz" class="mobile-nav-link quiz-link">Take The Quiz</a></li>
        </ul>

        <div class="mobile-actions">
          <a href="{{ routes.account_url }}" class="mobile-action" aria-label="Account">
            <img src="{{ 'icon-account.svg' | asset_url }}" alt="Account" width="20" height="20" loading="lazy">
          </a>
          <a href="{{ routes.cart_url }}" class="mobile-action cart-icon" aria-label="Cart">
            <img src="{{ 'icon-cart.svg' | asset_url }}" alt="Cart" width="20" height="20" loading="lazy">
            <span class="cart-count" style="display: none;">0</span>
          </a>
        </div>
      </div>
    </nav>
  </div>
</header>

<div id="predictive-search-modal" class="predictive-search-modal" aria-hidden="true">
  <div class="predictive-search-modal__overlay" id="predictive-search-overlay"></div>
  <div class="predictive-search-modal__content">
    <button id="predictive-search-close-btn" class="predictive-search-modal__close-btn" aria-label="Close search">&times;</button>
    <div class="predictive-search-modal__form-wrapper">
      {%- comment -%}
        This form and input structure is what triggers Shopify's native predictive search scripts.
        The results are then rendered into the div below.
      {%- endcomment -%}
      <form action="{{ routes.search_url }}" method="get" role="search" class="predictive-search-form">
        <input
          id="predictive-search-input"
          type="search"
          name="q"
          value="{{ search.terms | escape }}"
          placeholder="What are you looking for?"
          class="predictive-search-modal__input"
          aria-expanded="false"
          aria-controls="predictive-search-results"
          aria-owns="predictive-search-results"
          autocomplete="off"
        >
        <div class="predictive-search-results-container">
          {%- comment -%} This is where your provided Liquid code is rendered. {%- endcomment -%}
          {% comment %}theme-check-disable ImgLazyLoading{% endcomment %}
          {%- if predictive_search.performed -%}
            {% assign first_column_results_size = predictive_search.resources.queries.size
              | plus: predictive_search.resources.collections.size
              | plus: predictive_search.resources.pages.size
              | plus: predictive_search.resources.articles.size
            %}
            <div id="predictive-search-results" role="listbox">
              {%- if first_column_results_size > 0 or predictive_search.resources.products.size > 0 -%}
                <div
                  id="predictive-search-results-groups-wrapper"
                  class="predictive-search__results-groups-wrapper{% unless predictive_search.resources.products.size > 0 %} predictive-search__results-groups-wrapper--no-products{% endunless %}{% unless predictive_search.resources.queries.size > 0 or predictive_search.resources.collections.size > 0 %} predictive-search__results-groups-wrapper--no-suggestions{% endunless %}"
                >
              {%- endif -%}
              {%- if first_column_results_size > 0 -%}
                <div class="predictive-search__result-group">
              {%- endif -%}
              {%- if predictive_search.resources.queries.size > 0 or predictive_search.resources.collections.size > 0 -%}
                <div>
                  <h2 id="predictive-search-queries" class="predictive-search__heading text-body caption-with-letter-spacing">
                    {{- 'templates.search.suggestions' | t -}}
                  </h2>
                  <ul
                    id="predictive-search-results-queries-list"
                    class="predictive-search__results-list list-unstyled"
                    role="group"
                    aria-labelledby="predictive-search-queries"
                  >
                    {%- for query in predictive_search.resources.queries -%}
                      <li
                        id="predictive-search-option-query-{{ forloop.index }}"
                        class="predictive-search__list-item"
                        role="option"
                        aria-selected="false"
                      >
                        <a href="{{ query.url }}" class="predictive-search__item link link--text" tabindex="-1">
                          <div class="predictive-search__item-content predictive-search__item-content--centered">
                            <p
                              class="predictive-search__item-heading predictive-search__item-query-result h5"
                              aria-label="{{ query.text }}"
                            >
                              {{ query.styled_text }}
                            </p>
                          </div>
                        </a>
                      </li>
                    {%- endfor -%}
                    {%- for collection in predictive_search.resources.collections -%}
                      <li
                        id="predictive-search-option-collection-{{ forloop.index }}"
                        class="predictive-search__list-item"
                        role="option"
                        aria-selected="false"
                      >
                        <a href="{{ collection.url }}" class="predictive-search__item link link--text" tabindex="-1">
                          <div class="predictive-search__item-content predictive-search__item-content--centered">
                            <p class="predictive-search__item-heading h5">{{ collection.title | escape }}</p>
                          </div>
                        </a>
                      </li>
                    {%- endfor -%}
                  </ul>
                </div>
              {%- endif -%}
              {%- if predictive_search.resources.articles.size > 0 or predictive_search.resources.pages.size > 0 -%}
                <div class="predictive-search__pages-wrapper">
                  <h2
                    id="predictive-search-pages-desktop"
                    class="predictive-search__heading text-body caption-with-letter-spacing"
                  >
                    {{- 'templates.search.pages' | t -}}
                  </h2>
                  <ul
                    id="predictive-search-results-pages-list-desktop"
                    class="predictive-search__results-list list-unstyled"
                    role="group"
                    aria-labelledby="predictive-search-pages-desktop"
                  >
                    {%- for page in predictive_search.resources.pages -%}
                      <li
                        id="predictive-search-option-page-desktop-{{ forloop.index }}"
                        class="predictive-search__list-item"
                        role="option"
                        aria-selected="false"
                      >
                        <a href="{{ page.url }}" class="predictive-search__item link link--text" tabindex="-1">
                          <div class="predictive-search__item-content predictive-search__item-content--centered">
                            <p class="predictive-search__item-heading h5">{{ page.title | escape }}</p>
                          </div>
                        </a>
                      </li>
                    {%- endfor -%}
                    {%- for article in predictive_search.resources.articles -%}
                      <li
                        id="predictive-search-option-article-desktop-{{ forloop.index }}"
                        class="predictive-search__list-item"
                        role="option"
                        aria-selected="false"
                      >
                        <a href="{{ article.url }}" class="predictive-search__item link link--text" tabindex="-1">
                          <div class="predictive-search__item-content predictive-search__item-content--centered">
                            <p class="predictive-search__item-heading h5">{{ article.title | escape }}</p>
                          </div>
                        </a>
                      </li>
                    {%- endfor -%}
                  </ul>
                </div>
              {%- endif -%}
              {%- if first_column_results_size > 0 -%}
                </div>
              {%- endif -%}
              {%- if predictive_search.resources.products.size > 0
                or predictive_search.resources.articles.size > 0
                or predictive_search.resources.pages.size > 0
              -%}
                <div class="predictive-search__result-group">
                  {%- if predictive_search.resources.products.size > 0 -%}
                    <div>
                      <h2
                        id="predictive-search-products"
                        class="predictive-search__heading text-body caption-with-letter-spacing"
                      >
                        {{- 'templates.search.products' | t -}}
                      </h2>
                      <ul
                        id="predictive-search-results-products-list"
                        class="predictive-search__results-list list-unstyled"
                        role="group"
                        aria-labelledby="predictive-search-products"
                      >
                        {%- for product in predictive_search.resources.products -%}
                          <li
                            id="predictive-search-option-product-{{ forloop.index }}"
                            class="predictive-search__list-item"
                            role="option"
                            aria-selected="false"
                          >
                            <a
                              href="{{ product.url }}"
                              class="predictive-search__item predictive-search__item--link-with-thumbnail link link--text"
                              tabindex="-1"
                            >
                              {%- if product.featured_media != blank -%}
                                <img
                                  class="predictive-search__image"
                                  src="{{ product.featured_media | image_url: width: 150 }}"
                                  alt="{{ product.featured_media.alt | escape }}"
                                  width="50"
                                  height="{{ 50 | divided_by: product.featured_media.preview_image.aspect_ratio }}"
                                >
                              {%- endif -%}
                              <div class="predictive-search__item-content{% unless settings.predictive_search_show_vendor or settings.predictive_search_show_price %} predictive-search__item-content--centered{% endunless %}">
                                {%- if settings.predictive_search_show_vendor -%}
                                  <span class="visually-hidden">{{ 'accessibility.vendor' | t }}</span>
                                  <div class="predictive-search__item-vendor caption-with-letter-spacing">
                                    {{ product.vendor }}
                                  </div>
                                {%- endif -%}
                                <p class="predictive-search__item-heading h5">{{ product.title | escape }}</p>
                                {%- if settings.predictive_search_show_price -%}
                                  {% render 'price', product: product, use_variant: true, show_badges: false %}
                                {%- endif -%}
                              </div>
                            </a>
                          </li>
                        {%- endfor -%}
                      </ul>
                    </div>
                  {%- endif -%}
                  {%- if predictive_search.resources.articles.size > 0 or predictive_search.resources.pages.size > 0 -%}
                    <div class="predictive-search__pages-wrapper">
                      <h2
                        id="predictive-search-pages-mobile"
                        class="predictive-search__heading text-body caption-with-letter-spacing"
                      >
                        {{- 'templates.search.pages' | t -}}
                      </h2>
                      <ul
                        id="predictive-search-results-pages-list-mobile"
                        class="predictive-search__results-list list-unstyled"
                        role="group"
                        aria-labelledby="predictive-search-pages-mobile"
                      >
                        {%- for page in predictive_search.resources.pages -%}
                          <li
                            id="predictive-search-option-page-mobile-{{ forloop.index }}"
                            class="predictive-search__list-item"
                            role="option"
                            aria-selected="false"
                          >
                            <a href="{{ page.url }}" class="predictive-search__item link link--text" tabindex="-1">
                              <div class="predictive-search__item-content predictive-search__item-content--centered">
                                <p class="predictive-search__item-heading h5">{{ page.title | escape }}</p>
                              </div>
                            </a>
                          </li>
                        {%- endfor -%}
                        {%- for article in predictive_search.resources.articles -%}
                          <li
                            id="predictive-search-option-article-mobile-{{ forloop.index }}"
                            class="predictive-search__list-item"
                            role="option"
                            aria-selected="false"
                          >
                            <a href="{{ article.url }}" class="predictive-search__item link link--text" tabindex="-1">
                              <div class="predictive-search__item-content predictive-search__item-content--centered">
                                <p class="predictive-search__item-heading h5">{{ article.title | escape }}</p>
                              </div>
                            </a>
                          </li>
                        {%- endfor -%}
                      </ul>
                    </div>
                  {%- endif -%}
                </div>
              {%- endif -%}
              {%- if first_column_results_size > 0 or predictive_search.resources.products.size > 0 -%}
                </div>
              {%- endif -%}

              {%- render 'loading-spinner', class: 'predictive-search__loading-state' -%}

              <div id="predictive-search-option-search-keywords" class="predictive-search__search-for-button">
                <button
                  class="predictive-search__item predictive-search__item--term link link--text h5 animate-arrow"
                  tabindex="-1"
                  role="option"
                  aria-selected="false"
                >
                  <span data-predictive-search-search-for-text>
                    {{- 'templates.search.search_for' | t: terms: predictive_search.terms -}}
                  </span>
                  <span class="svg-wrapper">
                    {% comment %}{{- 'icon-arrow.svg' | asset_url | img_tag -}}{% endcomment %}
                  </span>
                </button>
              </div>
            </div>

            <span class="hidden" data-predictive-search-live-region-count-value>
              {% liquid
                assign total_results = predictive_search.resources.products.size | plus: first_column_results_size
                if total_results == 0
                  echo 'templates.search.no_results' | t: terms: predictive_search.terms
                else
                  echo 'templates.search.results_with_count' | t: count: total_results | append: ': '
                  if predictive_search.resources.queries.size > 0
                    assign count = predictive_search.resources.queries.size | plus: predictive_search.resources.collections.size
                    echo 'templates.search.results_suggestions_with_count' | t: count: count | append: ', '
                  endif
                  if predictive_search.resources.pages.size > 0
                    assign count = predictive_search.resources.pages.size | plus: predictive_search.resources.articles.size
                    echo 'templates.search.results_pages_with_count' | t: count: count | append: ', '
                  endif
                  if predictive_search.resources.products.size > 0
                    echo 'templates.search.results_products_with_count' | t: count: predictive_search.resources.products.size
                  endif
                endif
              %}
            </span>
          {%- endif -%}
        </div>
      </form>
    </div>
  </div>
</div>
<div class="cart-drawer" id="cart-drawer">
  <div class="cart-drawer-header">
    <h2 class="cart-drawer-title">Your Bag (<span class="cart-item-count-display">0</span>)</h2>
    <button class="cart-drawer-close" aria-label="Close cart">×</button>
  </div>
  <div class="cart-drawer-body">
    <div class="cart-shipping-progress">
      <p>You are <span class="shipping-amount-away">$80.00</span> away from free shipping.</p>
      <div class="progress-bar-container">
        <div class="progress-bar" style="width: 0%;"></div>
      </div>
    </div>
    <div class="cart-items-container">
      </div>
  </div>
  <div class="cart-drawer-footer">
    <div class="cart-subtotal">
      <span>Subtotal</span>
      <span class="subtotal-price">$0.00</span>
    </div>
    <p class="cart-footer-note">Tax included. Shipping calculated at checkout.</p>
    <button class="checkout-button">Checkout</button>
  </div>
</div>
<div class="cart-overlay" id="cart-overlay"></div>
<style>
  /* Reset and Base Styles */
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  /* Header Styles */
  .site-header {
    position: fixed;
    top: 20px;
    left: 40px;
    radius: 8px;
    right: 40px;
    z-index: 1000;
    border-radius: 8px;
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(10px);
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
    padding: 0;
  }

  .header-container {
    max-width: 1520px;
    height: 70px;
    margin: 0 auto;
    padding: 20px 24px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    height: 60px;
  }

  /* Brand Text Styles */
  .header-logo {
    font-family: Rubik;
    font-size: 20px;
    line-height: 100%;
    letter-spacing: 0%;
    width: 148px;
    height: 24px;
    text-transform: uppercase;
    font-weight: 700;
  }

  .logo-link {
    display: flex;
    align-items: center;
    text-decoration: none;
  }

  .brand-text {
    width: 148px;
    height: 24px;
    font-family: 'Rubik', sans-serif;
    font-weight: 700;
    font-size: 20px;
    line-height: 100%;
    letter-spacing: 0%;
    text-transform: uppercase;
    color: #1B1F23;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0 8px;
    border-radius: 2px;
  }

  /* Mobile Menu Toggle */
  .mobile-menu-toggle {
    display: none;
    flex-direction: column;
    background: none;
    border: none;
    cursor: pointer;
    padding: 5px;
    z-index: 1001;
  }

  .mobile-menu-toggle span {
    width: 25px;
    height: 3px;
    background: #000;
    margin: 3px 0;
    transition: 0.3s;
  }

  .mobile-menu-toggle.active span:nth-child(1) {
    transform: rotate(-45deg) translate(-5px, 6px);
  }

  .mobile-menu-toggle.active span:nth-child(2) {
    opacity: 0;
  }

  .mobile-menu-toggle.active span:nth-child(3) {
    transform: rotate(45deg) translate(-5px, -6px);
  }

  /* Desktop Navigation */
  .desktop-nav {
    display: flex;
    align-items: center;
    gap: 30px;
    flex: 1;
    justify-content: center;
  }

.search-icon {
  display: flex;
  align-items: center;

}

.search-toggle {
  background: none;
  border: none;
  cursor: pointer;
  padding: 8px; /* This padding provides the clickable area around the 16x16 icon */
  color: black;
  transition: color 0.3s ease;
  display: flex;
  align-items: center;
  justify-content: center;
}

.search-toggle img {
  width: 26px;
  height: 26px;
  transition: opacity 0.3s ease;
  display: block;
}

  .nav-links {
    display: flex;
    list-style: none;
    gap: 30px;
    margin: 0;
    font-family: Rubik;
    font-weight: 400;
    font-size: 14px;
    line-height: 100%;
    letter-spacing: 0%;
    width: 34;
    height: 17;
  }

  .nav-link {
    text-decoration: none;
    color: #000;
    font-weight: 500;
    font-size: 16px;
    transition: color 0.3s ease;
    letter-spacing: 0.5px;
  }

  .nav-link:hover {
    color: #666;
  }

  /* Header Actions */
  .header-actions {
    display: flex;
    align-items: center;
    gap: 20px;
    flex-shrink: 0;
  }

  .men-section {
    display: flex;
    background: #E4E4E4;
    align-items: center;
    width: 94;
    height: 45;
    top: 33px;
    left: 1187px;
    border-radius: 8px;
    padding-top: 10px;
    padding-right: 6px;
    padding-bottom: 10px;
    padding-left: 16px;
    gap: 10px;
  }

  .men-section img {
    width: 16;
    height: 16;
  }

  .men-section:hover img {
    opacity: 0.8;
    width: 33;
    height: 33;
    gap: 10px;
  }

  .men-link {
    text-decoration: none;
    color: #000000;
    width: 29;
    height: 17;
    font-family: Rubik;
    font-weight: 500;
    font-size: 14px;
    line-height: 100%;
    letter-spacing: 0%;
  }

  .men-link:hover {
    color: #666;
  }

  .quiz-btn {
    background: #000;
    color: #fff;
    padding: 8px 16px;
    text-decoration: none;
    border-radius: 4px;
    font-weight: 500;
    font-size: 14px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    transition: background 0.3s ease;
    white-space: nowrap;
  }

  .quiz-btn:hover {
    background: #333;
  }

  .user-icon,
  .cart-icon {
    display: flex;
    align-items: center;
    text-decoration: none;
    color: #000;
    position: relative;
    transition: opacity 0.3s ease;
    width: 30;
    height: 30;
    gap: 10px;
    padding: 10px;
    cursor: pointer;
  }

  .user-icon:hover,
  .cart-icon:hover {
    opacity: 0.8;
  }

  .user-icon img,
  .cart-icon img {
    transition: opacity 0.3s ease;
    display: block;
  }

  .cart-count {
    position: absolute;
    top: -5px;
    right: -5px;
    background: #ff0000;
    color: #fff;
    border-radius: 50%;
    width: 18px;
    height: 18px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 10px;
    font-weight: bold;
    min-width: 18px;
  }

  /* Mobile Navigation */
  .mobile-nav {
    display: none;
    position: fixed;
    top: 60px;
    left: 0;
    right: 0;
    background: #fff;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.3s ease;
  }

  .mobile-nav.active {
    max-height: 400px;
  }

  .mobile-nav-content {
    padding: 20px;
  }

  .mobile-search {
    margin-bottom: 20px;
    padding-bottom: 20px;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  }

  .mobile-search .search-toggle {
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .mobile-nav-links {
    list-style: none;
    margin: 0 0 20px 0;
  }

  .mobile-nav-links li {
    margin-bottom: 15px;
  }

  .mobile-nav-link {
    display: block;
    padding: 10px 0;
    text-decoration: none;
    color: #000;
    font-weight: 500;
    font-size: 16px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  }

  .mobile-nav-link.quiz-link {
    background: #000;
    color: #fff;
    padding: 12px 20px;
    text-align: center;
    border-radius: 4px;
    border: none;
    margin-top: 10px;
  }

  .mobile-actions {
    display: flex;
    justify-content: center;
    gap: 30px;
    padding-top: 20px;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
  }

  .mobile-action {
    display: flex;
    align-items: center;
    text-decoration: none;
    color: #000;
    padding: 8px;
    position: relative;
    transition: opacity 0.3s ease;
  }

  .mobile-action:hover {
    opacity: 0.8;
  }

  .mobile-action img {
    display: block;
  }

  /* Ensure icons are visible */
  img[src*="icon-"] {
    max-width: 100%;
    height: auto;
    vertical-align: middle;
  }

  /* --- NEW STYLES FOR DYNAMIC CART --- */
  .cart-drawer {
    position: fixed;
    top: 0;
    right: -100%; /* Start off-screen */
    width: 480px;
    height: 100%;
    background-color: #fff;
    box-shadow: -2px 0 15px rgba(0,0,0,0.15);
    z-index: 1002;
    transition: right 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    display: flex;
    flex-direction: column;
    font-family: 'Rubik', sans-serif; /* Use a fallback for consistency */
  }

  .cart-drawer.active {
    right: 0;
  }

  .cart-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0,0,0,0.4);
    z-index: 1001;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.4s ease, visibility 0.4s ease;
  }

  .cart-overlay.active {
    opacity: 1;
    visibility: visible;
  }

  .cart-drawer-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 20px;
    border-bottom: 1px solid #e4e4e4;
    flex-shrink: 0;
  }

  .cart-drawer-title {
    font-family: Rubik;
    font-size: 20px;
    font-weight: 500;
  }

  .cart-drawer-close {
    background: none;
    border: none;
    font-size: 28px;
    cursor: pointer;
    color: #333;
  }

  .cart-drawer-body {
    padding: 20px;
    flex-grow: 1;
    overflow-y: auto;
  }

  .cart-shipping-progress {
    margin-bottom: 25px;
    text-align: left;
  }

  .cart-shipping-progress p {
    font-size: 14px;
    margin-bottom: 8px;
  }

  .progress-bar-container {
    width: 100%;
    background-color: #f0f0f0;
    border-radius: 5px;
    height: 8px;
  }

  .progress-bar {
    height: 100%;
    background-color: #000;
    border-radius: 5px;
    transition: width 0.3s ease;
  }

  .cart-item {
    display: flex;
    align-items: flex-start;
    margin-bottom: 20px;
    gap: 15px;
  }

  .cart-item-image {
    width: 80px;
    height: auto;
    border-radius: 8px;
    border: 1px solid #eee;
  }

  .cart-item-details {
    flex-grow: 1;
  }

  .cart-item-title {
    font-family: Rubik;
    font-size: 16px;
    font-weight: 500;
    margin-bottom: 8px;
  }

  .cart-item-price {
    font-size: 14px;
    color: #555;
    margin-bottom: 10px;
  }

  .quantity-selector {
    display: flex;
    align-items: center;
    border: 1px solid #e4e4e4;
    border-radius: 4px;
    max-width: 100px;
  }

  .quantity-btn {
    background: none;
    border: none;
    padding: 8px 12px;
    cursor: pointer;
    font-size: 16px;
    line-height: 1;
  }

  .item-quantity {
    padding: 0 5px;
    font-size: 14px;
    min-width: 20px;
    text-align: center;
  }

  .cart-item-actions {
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .remove-item-btn {
    background: none;
    border: none;
    font-size: 14px;
    cursor: pointer;
    color: #999;
    text-decoration: underline;
  }

  .cart-drawer-footer {
    padding: 20px;
    border-top: 1px solid #e4e4e4;
    background: #fff;
    flex-shrink: 0;
  }

  .cart-subtotal {
    display: flex;
    justify-content: space-between;
    font-size: 18px;
    font-weight: bold;
    margin-bottom: 10px;
  }

  .cart-footer-note {
    font-size: 12px;
    color: #777;
    text-align: center;
    margin-bottom: 15px;
  }

  .checkout-button {
    width: 100%;
    padding: 15px;
    background-color: #000;
    color: #fff;
    border: none;
    border-radius: 4px;
    font-size: 16px;
    font-weight: 500;
    cursor: pointer;
    text-transform: uppercase;
    font-family: Rubik;
  }

  /* --- END OF NEW CART STYLES --- */

  /* Media Queries */
  @media (max-width: 768px) {
    .desktop-nav {
      display: none;
    }

    .mobile-menu-toggle {
      display: flex;
    }

    .mobile-nav {
      display: block;
    }

    .header-container {
      padding: 0 10px;
    }

    .brand-text {
      font-size: 18px;
      width: 130px;
      height: 22px;
    }

    .cart-drawer {
      width: 90%;
      max-width: 400px;
    }
  }

  @media (max-width: 480px) {
    .header-container {
      height: 50px;
      padding: 0 8px;
    }

    .brand-text {
      font-size: 16px;
      width: 120px;
      height: 20px;
    }

    .mobile-nav {
      top: 50px;
    }

    .mobile-nav-content {
      padding: 15px;
    }

    .mobile-nav-link {
      font-size: 14px;
      padding: 8px 0;
    }
  }

  @media (max-width: 320px) {
    .header-container {
      padding: 0 5px;
      height: 45px;
    }

    .brand-text {
      font-size: 14px;
      width: 110px;
      height: 18px;
    }

    .mobile-nav {
      top: 45px;
    }

    .mobile-nav-content {
      padding: 10px;
    }

    .mobile-nav-link {
      font-size: 13px;
    }
  }

  @media (max-width: 250px) {
    .header-container {
      padding: 0 3px;
      height: 40px;
    }

    .brand-text {
      font-size: 12px;
      width: 100px;
      height: 16px;
      padding: 0 4px;
    }

    .mobile-menu-toggle span {
      width: 20px;
      height: 2px;
    }

    .mobile-nav {
      top: 40px;
    }

    .mobile-nav-content {
      padding: 8px;
    }

    .mobile-nav-link {
      font-size: 12px;
      padding: 6px 0;
    }

    .mobile-actions {
      gap: 20px;
    }
  }

  /* ======================================================================= */
  /* ================== START: NEW CSS FOR PREDICTIVE SEARCH ============= */
  /* ======================================================================= */

  /* This CSS is scoped to the new search elements and will not affect your original styles. */

  .predictive-search-modal {
    display: none; /* Hidden by default */
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 2000; /* Above everything */
    align-items: flex-start;
    justify-content: center;
    padding-top: 15vh;
  }

  .predictive-search-modal.active {
    display: flex; /* Show when active */
  }

  /* Blur overlay */
  .predictive-search-modal__overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(255, 255, 255, 0.5); /* Semi-transparent white */
    backdrop-filter: blur(5px);
    -webkit-backdrop-filter: blur(5px);
  }

  .predictive-search-modal__content {
    position: relative;
    z-index: 1;
    width: 90%;
    max-width: 650px;
    background-color: white;
    border-radius: 8px;
    box-shadow: 0 10px 40px rgba(0,0,0,0.2);
    padding: 20px;
    display: flex;
    flex-direction: column;
  }

  .predictive-search-modal__close-btn {
    position: absolute;
    top: 10px;
    right: 15px;
    background: none;
    border: none;
    font-size: 30px;
    line-height: 1;
    color: #888;
    cursor: pointer;
  }
  .predictive-search-modal__close-btn:hover {
    color: #000;
  }

  .predictive-search-modal__form-wrapper {
    width: 100%;
  }

  .predictive-search-modal__input {
    width: 100%;
    padding: 12px 0;
    font-size: 1.5rem;
    border: none;
    border-bottom: 2px solid #ccc;
    outline: none;
    transition: border-color 0.3s;
    font-family: 'Rubik', sans-serif;
  }

  .predictive-search-modal__input:focus {
    border-bottom-color: #000;
  }

  .predictive-search-results-container {
    margin-top: 10px;
    max-height: 50vh;
    overflow-y: auto;
  }

  /* --- Styling for Your Liquid Snippet Classes --- */
  .list-unstyled {
    list-style: none;
    padding: 0;
  }
  .predictive-search__results-list {
    margin: 0;
  }
  .predictive-search__heading {
    font-family: 'Rubik', sans-serif;
    font-size: 12px;
    font-weight: 500;
    text-transform: uppercase;
    color: #888;
    padding: 15px 10px 5px;
    letter-spacing: 0.05em;
  }
  .predictive-search__item {
    display: flex;
    align-items: center;
    padding: 10px;
    text-decoration: none;
    color: #1B1F23;
    transition: background-color 0.2s ease;
    border-radius: 4px;
  }
  .predictive-search__item:hover {
    background-color: #f7f7f7;
  }
  .predictive-search__item--link-with-thumbnail .predictive-search__item-content {
    padding-left: 15px;
  }
  .predictive-search__image {
    width: 50px;
    height: 50px;
    object-fit: cover;
    flex-shrink: 0;
    border-radius: 4px;
  }
  .predictive-search__item-heading {
    margin: 0;
    font-size: 1rem;
    font-family: 'Rubik', sans-serif;
    font-weight: 400;
  }
  .predictive-search__item-heading.h5 {
     font-size: 1rem;
     font-weight: 400;
  }
  .predictive-search__search-for-button {
    padding-top: 10px;
    border-top: 1px solid #eee;
    margin-top: 10px;
  }
  .predictive-search__item--term {
    width: 100%;
    justify-content: space-between;
    background: none;
    border: none;
  }
  .hidden {
    display: none !important;
  }

  @media (max-width: 768px) {
    .predictive-search-modal {
      padding-top: 10vh;
    }
    .predictive-search-modal__input {
      font-size: 1.2rem;
    }
  }
  /* ================== END: NEW CSS FOR PREDICTIVE SEARCH ============= */
</style>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const mobileMenuToggle = document.querySelector('.mobile-menu-toggle');
    const mobileNav = document.querySelector('.mobile-nav');

    if (mobileMenuToggle && mobileNav) {
      mobileMenuToggle.addEventListener('click', function() {
        this.classList.toggle('active');
        mobileNav.classList.toggle('active');
      });
    }
  });
</script>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // --- CART ELEMENTS ---
    const cartDrawer = document.getElementById('cart-drawer');
    const cartOverlay = document.getElementById('cart-overlay');
    const cartIcons = document.querySelectorAll('.cart-icon:not(.mobile-action)');
    const mobileCartIcon = document.querySelector('.mobile-action.cart-icon');
    const allCartIcons = document.querySelectorAll('.cart-icon');
    const closeCartButton = document.querySelector('.cart-drawer-close');
    const cartItemsContainer = document.querySelector('.cart-items-container');
    const cartCountElements = document.querySelectorAll('.cart-count');
    const subtotalPriceElement = document.querySelector('.subtotal-price');
    const cartItemCountDisplay = document.querySelector('.cart-item-count-display');
    const addToCartButtons = document.querySelectorAll('.add-to-cart-btn'); // Targets both product and bundle buttons
    const shippingAmountAwayEl = document.querySelector('.shipping-amount-away');
    const shippingProgressBar = document.querySelector('.progress-bar');
    
    // --- CART STATE & CONFIG ---
    let cartItems = []; // Local cart state
    const FREE_SHIPPING_THRESHOLD = 80;

    // --- CART FUNCTIONS ---

    const openCart = () => {
        cartDrawer.classList.add('active');
        cartOverlay.classList.add('active');
        document.body.style.overflow = 'hidden';
    };

    const closeCart = () => {
        cartDrawer.classList.remove('active');
        cartOverlay.classList.remove('active');
        document.body.style.overflow = '';
    };

    const renderCart = () => {
        cartItemsContainer.innerHTML = ''; // Clear previous items

        if (cartItems.length === 0) {
            cartItemsContainer.innerHTML = '<p style="text-align:center; padding: 40px 0; font-family: Rubik;">Your bag is empty.</p>';
        } else {
            cartItems.forEach(item => {
                const cartItemElement = document.createElement('div');
                cartItemElement.classList.add('cart-item');
                cartItemElement.dataset.id = item.id;
                cartItemElement.innerHTML = `
                    <img src="${item.image}" alt="${item.name}" class="cart-item-image" onerror="this.onerror=null;this.src='https://placehold.co/80x80/f0f0f0/333?text=Image';">
                    <div class="cart-item-details">
                        <p class="cart-item-title">${item.name}</p>
                        <p class="cart-item-price">$${item.price.toFixed(2)}</p>
                        <div class="cart-item-actions">
                            <div class="quantity-selector">
                                <button class="quantity-btn" data-action="decrease" aria-label="Decrease quantity">-</button>
                                <span class="item-quantity">${item.quantity}</span>
                                <button class="quantity-btn" data-action="increase" aria-label="Increase quantity">+</button>
                            </div>
                            <button class="remove-item-btn" aria-label="Remove ${item.name}">Remove</button>
                        </div>
                    </div>
                `;
                cartItemsContainer.appendChild(cartItemElement);
            });
        }
        updateCartSummary();
    };

    const updateCartSummary = () => {
        const totalItems = cartItems.reduce((sum, item) => sum + item.quantity, 0);
        const subtotal = cartItems.reduce((sum, item) => sum + (item.price * item.quantity), 0);

        // Update header and drawer counts
        cartCountElements.forEach(el => {
            el.textContent = totalItems;
            el.style.display = totalItems > 0 ? 'flex' : 'none';
        });
        cartItemCountDisplay.textContent = totalItems;

        // Update subtotal
        subtotalPriceElement.textContent = `$${subtotal.toFixed(2)}`;

        // Update shipping progress
        const amountAway = FREE_SHIPPING_THRESHOLD - subtotal;
        if (subtotal >= FREE_SHIPPING_THRESHOLD) {
            if (shippingAmountAwayEl) {
                const parent = shippingAmountAwayEl.parentElement;
                parent.innerHTML = '<p style="font-weight: 500; color: #000;">You have free shipping!</p>';
                // Ensure the progress bar is also full
                 if(shippingProgressBar) shippingProgressBar.style.width = '100%';
            }
        } else if (shippingAmountAwayEl) {
             const parent = shippingAmountAwayEl.parentElement;
             // Restore original content if it was replaced
             if(!parent.querySelector('.shipping-amount-away')){
                 parent.innerHTML = `<p>You are <span class="shipping-amount-away">$${amountAway.toFixed(2)}</span> away from free shipping.</p>
                                    <div class="progress-bar-container">
                                        <div class="progress-bar" style="width: ${(subtotal / FREE_SHIPPING_THRESHOLD) * 100}%;"></div>
                                    </div>`;
             } else {
                shippingAmountAwayEl.textContent = `$${amountAway.toFixed(2)}`;
                 if(shippingProgressBar) shippingProgressBar.style.width = `${(subtotal / FREE_SHIPPING_THRESHOLD) * 100}%`;
             }
        }
    };
    
    const addItemToCart = (product) => {
        const existingItem = cartItems.find(item => item.id === product.id);
        if (existingItem) {
            existingItem.quantity++;
        } else {
            cartItems.push({ ...product, quantity: 1 });
        }
        renderCart();
        openCart();
    };
    
    const updateQuantity = (productId, action) => {
        const itemIndex = cartItems.findIndex(item => item.id === productId);
        if (itemIndex === -1) return;

        if (action === 'increase') {
            cartItems[itemIndex].quantity++;
        } else if (action === 'decrease') {
            cartItems[itemIndex].quantity--;
            if (cartItems[itemIndex].quantity <= 0) {
                cartItems.splice(itemIndex, 1); // Remove if quantity is 0
            }
        }
        renderCart();
    };

    const removeItem = (productId) => {
        cartItems = cartItems.filter(item => item.id !== productId);
        renderCart();
    };

    // --- EVENT LISTENERS ---

    allCartIcons.forEach(icon => {
        icon.addEventListener('click', (e) => {
            e.preventDefault();
            openCart();
        });
    });

    if(closeCartButton) closeCartButton.addEventListener('click', closeCart);
    if(cartOverlay) cartOverlay.addEventListener('click', closeCart);
    
    addToCartButtons.forEach(button => {
        button.addEventListener('click', (e) => {
            const card = e.target.closest('.product-card, .bundle-card'); // Handle both product and bundle cards
            if (!card) return;
            
            const product = {
                id: card.dataset.productId || card.dataset.id, // Use productId from bundles or fallback to id
                name: card.dataset.productTitle || card.dataset.name, // Use productTitle from bundles or fallback to name
                price: parseFloat(card.dataset.price || card.dataset.productPrice), // Use dynamic price or fallback to productPrice
                image: card.dataset.productImage || card.dataset.image // Use productImage from bundles or fallback to image
            };
            addItemToCart(product);
        });
    });

    if(cartItemsContainer) {
      cartItemsContainer.addEventListener('click', (e) => {
          const target = e.target;
          const cartItem = target.closest('.cart-item');
          if (!cartItem) return;
          
          const productId = cartItem.dataset.id;

          if (target.matches('.quantity-btn')) {
              updateQuantity(productId, target.dataset.action);
          } else if (target.matches('.remove-item-btn')) {
              removeItem(productId);
          }
      });
    }
    
    // --- INITIALIZATION ---
    renderCart(); // Initialize cart view on page load
});
</script>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const searchModal = document.getElementById('predictive-search-modal');
    if (!searchModal) return;

    const searchToggles = document.querySelectorAll('.search-toggle');
    const searchCloseBtn = document.getElementById('predictive-search-close-btn');
    const searchOverlay = document.getElementById('predictive-search-overlay');
    const searchInput = document.getElementById('predictive-search-input');

    const openSearch = () => {
      searchModal.classList.add('active');
      searchModal.setAttribute('aria-hidden', 'false');
      document.body.style.overflow = 'hidden'; // Prevent background scrolling
      // Use a small timeout to ensure the input is visible before focusing
      setTimeout(() => {
        searchInput.focus();
      }, 50);
    };

    const closeSearch = () => {
      searchModal.classList.remove('active');
      searchModal.setAttribute('aria-hidden', 'true');
      document.body.style.overflow = ''; // Restore scrolling
    };

    // Event listeners to open the modal
    searchToggles.forEach(toggle => {
      toggle.addEventListener('click', (event) => {
        event.preventDefault();
        openSearch();
      });
    });

    // Event listeners to close the modal
    searchCloseBtn.addEventListener('click', closeSearch);
    searchOverlay.addEventListener('click', closeSearch); // Close when clicking the overlay

    // Close with the 'Escape' key
    document.addEventListener('keydown', (event) => {
      if (event.key === 'Escape' && searchModal.classList.contains('active')) {
        closeSearch();
      }
    });
  });
</script>